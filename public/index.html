<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="card.css">
    <link rel="stylesheet" href="email.css">
    <link rel="stylesheet" href="sends.css">
    <link rel="stylesheet" href="modal.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
    <title>Jquery App</title>
  </head>
  <body>
    <div class="body">
      <header class="header">
        <h1>Lorem ipsum dolor sit amet donec voluptatem ipsum dolor sit amet donex voluptatem</h1>
        <div class="hide-login-btn">
          <g xmlns="http://www.w3.org/2000/svg" id="close-icon">
          <path 
            id="close-icon" 
            d="M19.000,18.457 L18.457,19.000 L9.500,10.043 L0.543,19.000 L0.000,18.457 
              L8.957,9.500 L0.000,0.543 L0.543,0.000 L9.500,8.957 L18.457,0.000 L19.000,0.543 
              L10.043,9.500 L19.000,18.457 z" 
            fill="#999999"
          />
          </g>
        </div>
      </header>
    <main class="main">
      <div class="information">
        <h1>Profesional Custom <br> Service Just <b class="text_yellow">for You</b></h1>
        <p>We can do 
          <b class="text_yellow">
            anything
          </b>
        </p>
      </div>
     
      <div class="login-box">
        <form class="login-form" action="index.html" method="post">
          <h1>Calculate the Price</h1>
          <label class="lable__select">Choose level</label>
            
          <form class="login-box_nav-lang">
            <div class="login-box_dropdown login-box_lang_drop">
              <span class="login-form__lang_drop-title">
                Hardcore
              </span>
            <div class="login-box_dropdown-content">
              <ul class="login-box_dropdown-content_list">
                <li class="login-box_dropdown-content_list-item ">
                  <a class="dropdown_link" href="#!">Eeasy Core</a>
                </li>
                <li class="login-box_dropdown-content_list-item">
                  <a class="dropdown_link" href="#!">NormalyCore</a>
                </li>
              </ul>
            </div>
            </div>
          </form>
            <p class="" >How many</p>      
        </form>
        <div class="main-cart"></div>
        <button class=" show-login-btn button_pop_up">Pop Up</button>

        <div class="email-field">
          <div class="email__hide-login-btn">
            <g xmlns="http://www.w3.org/2000/svg" id="close-icon">
              <path 
                id="close-icon" 
                d="M19.000,18.457 L18.457,19.000 L9.500,10.043 L0.543,19.000 
                  L0.000,18.457 L8.957,9.500 L0.000,0.543 L0.543,0.000 L9.500,8.957 
                  L18.457,0.000 L19.000,0.543 L10.043,9.500 L19.000,18.457 z" 
                fill="#999999"
              />
            </g>
          </div>
          <h1>Ask us how we can help you</h1>
          <p class="email-field-text">Lorem ipsum dolor sit amet</p>
          <p class="email-field-name-text">
            Enter your name 
            <div class="email-field-name">
              <img src="./user_icon.svg"> 
              <input type="text" id="ename" min="3">
            </div>
          </p>
            <p class="email-field-email email-field-name-text">
              Enter your email 
              <div class="email-field-email email-field-name">
                <img src="./email_icon.svg"> 
                <input type="email" id="email" placeholder="example@gmail.com">
              </div>
            </p>
            <p class="email-field-phone email-field-name-text">Your phone
              <div class="email-field-phone email-field-name">
                <img src="./FLAG.png"> 
                <div class="divider"></div>
                <input type="number" id="ephone" min="7" max="7">
              </div>
            </p>
            <p class="send-email">
              <button type="submit">
                Continue
              </button>
            </p> 
          </div>
          
          <div class="send_email">
            <div class="send-email_close"> 
              <img class="email__hide-send_email" src="./close_icon.svg" alt="close window">
            </div>
                 
            <img src="./envelope.svg" alt="Check your email">
            <h1 class="send-email_text">Thank you</h1>
            <p class="send-email_check">please Check your email</p>
            <p class="send__email_button">
              <button class="send-email_button">
                Ok, tnx
              </button>
            </p> 
          </div>
        </div>
        <div>
          <div class="mini-cart"></div>
          <div class="goods-out"></div>
        </div>
    </main>
  </div>

<script type="text/javascript">
var cart = { id:1 };

function LoadCart() {
  cart = JSON.parse(localStorage.getItem('cart'));
  showCart();
}

function showCart() {
  goodsOut();
}
function goodsOut() {
  var out = '';
  var id = 1;
    out += ` <div class="main_plus_mine">`;
    out += ` <div class="container">`;
    out += ` <button class="minus">-</button>`;
    out += `${cart.id}`;
    out += `<button data-id="${id}" class="plus-goods">+</button>`;
    out += ` </div>`;
    out += ` </div>`;
    out += `<button class="cost">${cart.id* 10.99}</button>`;
    out += ``;
  $('.main-cart').html(out);
  $('.plus-goods').on('click', plusGoods);
  $('.minus').on('click', minusGoods);
}

function minusGoods() {
  if (cart.id == 1) {
    cart.id;
  } else {
    cart.id--;
  }
  saveCart()
  showCart();
}

function plusGoods() {
  cart.id++;
  saveCart()
  showCart();
}

function saveCart() {
  localStorage.setItem('cart', JSON.stringify(cart));
}

function changeFont(_name) {
    document.getElementById("ename").style.fontFamily = _name;
}
function sendEmail() {
  var ename = $('#ename').val();
  var email = $('#email').val();
  var ephone= $('#ephone').val();
  var correctEmail = email.split('').filter(partEmail => partEmail === '@').length;
  if (ename != ''
   && ename.length > 2
    && email != '' && ephone.length > 9 && correctEmail === 1) {
      $.post(
        "core/mail.php",
        {
          "ename": ename,
          "email": email,
          "ephone": ephone,
          "cart": cart
        },
        function(data){
          console.log(data);
        }
      )
      $(".send_email").toggleClass("showed_end");
      $(".email-field").toggleClass("hidden_close");  
  } else {
    alert('please correct fill form');
  }
}

$(document).ready(function () {
  LoadCart();
  $('.send-email').on('click', sendEmail)
})
</script>

<script type="text/javascript">
$(".show-send__email").on("click",function(){
  $(".send_email").fadeIn(8800)
})
$(".send-email_button").on("click",function() {
  $(".send_email").toggleClass("hidden");
})      
$(".email__hide-login-btn").on("click",function() {
  $(".email-field").fadeOut(300);
})
$(".show-login-btn").on("click",function(){
  $(".email-field").fadeIn(300)
})
$(".hide-login-btn").on("click",function(){
  $(".login-box").fadeOut(300)
})
$(".email__hide-send_email").on("click",function(){
  $(".send_email").fadeOut(300)
})              
</script>

  </body>
</html>
